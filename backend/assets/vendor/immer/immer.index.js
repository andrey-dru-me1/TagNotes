/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/immer@10.1.1/dist/immer.mjs
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var e=Symbol.for("immer-nothing"),t=Symbol.for("immer-draftable"),n=Symbol.for("immer-state");function r(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var o=Object.getPrototypeOf;function s(e){return!!e&&!!e[n]}function a(e){return!!e&&(i(e)||Array.isArray(e)||!!e[t]||!!e.constructor?.[t]||d(e)||y(e))}var c=Object.prototype.constructor.toString();function i(e){if(!e||"object"!=typeof e)return!1;const t=o(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===c}function u(e){return s(e)||r(15),e[n].base_}function f(e,t){0===p(e)?Reflect.ownKeys(e).forEach((n=>{t(n,e[n],e)})):e.forEach(((n,r)=>t(r,n,e)))}function p(e){const t=e[n];return t?t.type_:Array.isArray(e)?1:d(e)?2:y(e)?3:0}function l(e,t){return 2===p(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function _(e,t){return 2===p(e)?e.get(t):e[t]}function h(e,t,n){const r=p(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function d(e){return e instanceof Map}function y(e){return e instanceof Set}function b(e){return e.copy_||e.base_}function v(e,t){if(d(e))return new Map(e);if(y(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=i(e);if(!0===t||"class_only"===t&&!r){const t=Object.getOwnPropertyDescriptors(e);delete t[n];let r=Reflect.ownKeys(t);for(let n=0;n<r.length;n++){const o=r[n],s=t[o];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[o]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[o]})}return Object.create(o(e),t)}{const t=o(e);if(null!==t&&r)return{...e};const n=Object.create(t);return Object.assign(n,e)}}function g(e,t=!1){return w(e)||s(e)||!a(e)||(p(e)>1&&(e.set=e.add=e.clear=e.delete=m),Object.freeze(e),t&&Object.entries(e).forEach((([e,t])=>g(t,!0)))),e}function m(){r(2)}function w(e){return Object.isFrozen(e)}var S,P={};function z(e){const t=P[e];return t||r(0),t}function O(e,t){P[e]||(P[e]=t)}function j(){return S}function A(e,t){t&&(z("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function M(e){x(e),e.drafts_.forEach(k),e.drafts_=null}function x(e){e===S&&(S=e.parent_)}function F(e){return S={drafts_:[],parent_:S,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function k(e){const t=e[n];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function E(t,o){o.unfinalizedDrafts_=o.drafts_.length;const s=o.drafts_[0];return void 0!==t&&t!==s?(s[n].modified_&&(M(o),r(4)),a(t)&&(t=D(o,t),o.parent_||N(o,t)),o.patches_&&z("Patches").generateReplacementPatches_(s[n].base_,t,o.patches_,o.inversePatches_)):t=D(o,s,[]),M(o),o.patches_&&o.patchListener_(o.patches_,o.inversePatches_),t!==e?t:void 0}function D(e,t,r){if(w(t))return t;const o=t[n];if(!o)return f(t,((n,s)=>C(e,o,t,n,s,r))),t;if(o.scope_!==e)return t;if(!o.modified_)return N(e,o.base_,!0),o.base_;if(!o.finalized_){o.finalized_=!0,o.scope_.unfinalizedDrafts_--;const t=o.copy_;let n=t,s=!1;3===o.type_&&(n=new Set(t),t.clear(),s=!0),f(n,((n,a)=>C(e,o,t,n,a,r,s))),N(e,t,!1),r&&e.patches_&&z("Patches").generatePatches_(o,r,e.patches_,e.inversePatches_)}return o.copy_}function C(e,t,n,r,o,c,i){if(s(o)){const a=D(e,o,c&&t&&3!==t.type_&&!l(t.assigned_,r)?c.concat(r):void 0);if(h(n,r,a),!s(a))return;e.canAutoFreeze_=!1}else i&&n.add(o);if(a(o)&&!w(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;D(e,o),t&&t.scope_.parent_||"symbol"==typeof r||!Object.prototype.propertyIsEnumerable.call(n,r)||N(e,o)}}function N(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&g(t,n)}var R={get(e,t){if(t===n)return e;const r=b(e);if(!l(r,t))return function(e,t,n){const r=I(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}(e,r,t);const o=r[t];return e.finalized_||!a(o)?o:o===W(e.base_,t)?(L(e),e.copy_[t]=X(o,e)):o},has:(e,t)=>t in b(e),ownKeys:e=>Reflect.ownKeys(b(e)),set(e,t,r){const o=I(b(e),t);if(o?.set)return o.set.call(e.draft_,r),!0;if(!e.modified_){const o=W(b(e),t),c=o?.[n];if(c&&c.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(((s=r)===(a=o)?0!==s||1/s==1/a:s!=s&&a!=a)&&(void 0!==r||l(e.base_,t)))return!0;L(e),U(e)}var s,a;return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==W(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,L(e),U(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=b(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){r(11)},getPrototypeOf:e=>o(e.base_),setPrototypeOf(){r(12)}},K={};function W(e,t){const r=e[n];return(r?b(r):e)[t]}function I(e,t){if(!(t in e))return;let n=o(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=o(n)}}function U(e){e.modified_||(e.modified_=!0,e.parent_&&U(e.parent_))}function L(e){e.copy_||(e.copy_=v(e.base_,e.scope_.immer_.useStrictShallowCopy_))}f(R,((e,t)=>{K[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),K.deleteProperty=function(e,t){return K.set.call(this,e,t,void 0)},K.set=function(e,t,n){return R.set.call(this,e[0],t,n,e[0])};var J=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,o)=>{if("function"==typeof t&&"function"!=typeof n){const e=n;n=t;const r=this;return function(t=e,...o){return r.produce(t,(e=>n.call(this,e,...o)))}}let s;if("function"!=typeof n&&r(6),void 0!==o&&"function"!=typeof o&&r(7),a(t)){const e=F(this),r=X(t,void 0);let a=!0;try{s=n(r),a=!1}finally{a?M(e):x(e)}return A(e,o),E(s,e)}if(!t||"object"!=typeof t){if(s=n(t),void 0===s&&(s=t),s===e&&(s=void 0),this.autoFreeze_&&g(s,!0),o){const e=[],n=[];z("Patches").generateReplacementPatches_(t,s,e,n),o(e,n)}return s}r(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...n)=>this.produceWithPatches(t,(t=>e(t,...n)));let n,r;return[this.produce(e,t,((e,t)=>{n=e,r=t})),n,r]},"boolean"==typeof t?.autoFreeze&&this.setAutoFreeze(t.autoFreeze),"boolean"==typeof t?.useStrictShallowCopy&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(e){a(e)||r(8),s(e)&&(e=$(e));const t=F(this),o=X(e,void 0);return o[n].isManual_=!0,x(t),o}finishDraft(e,t){const o=e&&e[n];o&&o.isManual_||r(9);const{scope_:s}=o;return A(s,t),E(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=z("Patches").applyPatches_;return s(e)?r(e,t):this.produce(e,(e=>r(e,t)))}};function X(e,t){const n=d(e)?z("MapSet").proxyMap_(e,t):y(e)?z("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:j(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=r,s=R;n&&(o=[r],s=K);const{revoke:a,proxy:c}=Proxy.revocable(o,s);return r.draft_=c,r.revoke_=a,c}(e,t);return(t?t.scope_:j()).drafts_.push(n),n}function $(e){return s(e)||r(10),q(e)}function q(e){if(!a(e)||w(e))return e;const t=e[n];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=v(e,t.scope_.immer_.useStrictShallowCopy_)}else r=v(e,!0);return f(r,((e,t)=>{h(r,e,q(t))})),t&&(t.finalized_=!1),r}function B(){const n="replace",c="add",i="remove";function u(e){if(!a(e))return e;if(Array.isArray(e))return e.map(u);if(d(e))return new Map(Array.from(e.entries()).map((([e,t])=>[e,u(t)])));if(y(e))return new Set(Array.from(e).map(u));const n=Object.create(o(e));for(const t in e)n[t]=u(e[t]);return l(e,t)&&(n[t]=e[t]),n}function h(e){return s(e)?u(e):e}O("Patches",{applyPatches_:function(e,t){return t.forEach((t=>{const{path:o,op:s}=t;let a=e;for(let e=0;e<o.length-1;e++){const t=p(a);let n=o[e];"string"!=typeof n&&"number"!=typeof n&&(n=""+n),0!==t&&1!==t||"__proto__"!==n&&"constructor"!==n||r(19),"function"==typeof a&&"prototype"===n&&r(19),a=_(a,n),"object"!=typeof a&&r(18,o.join("/"))}const f=p(a),l=u(t.value),h=o[o.length-1];switch(s){case n:switch(f){case 2:return a.set(h,l);case 3:r(16);default:return a[h]=l}case c:switch(f){case 1:return"-"===h?a.push(l):a.splice(h,0,l);case 2:return a.set(h,l);case 3:return a.add(l);default:return a[h]=l}case i:switch(f){case 1:return a.splice(h,1);case 2:return a.delete(h);case 3:return a.delete(t.value);default:return delete a[h]}default:r(17)}})),e},generatePatches_:function(e,t,r,o){switch(e.type_){case 0:case 2:return function(e,t,r,o){const{base_:s,copy_:a}=e;f(e.assigned_,((e,u)=>{const f=_(s,e),p=_(a,e),d=u?l(s,e)?n:c:i;if(f===p&&d===n)return;const y=t.concat(e);r.push(d===i?{op:d,path:y}:{op:d,path:y,value:p}),o.push(d===c?{op:i,path:y}:d===i?{op:c,path:y,value:h(f)}:{op:n,path:y,value:h(f)})}))}(e,t,r,o);case 1:return function(e,t,r,o){let{base_:s,assigned_:a}=e,u=e.copy_;u.length<s.length&&([s,u]=[u,s],[r,o]=[o,r]);for(let e=0;e<s.length;e++)if(a[e]&&u[e]!==s[e]){const a=t.concat([e]);r.push({op:n,path:a,value:h(u[e])}),o.push({op:n,path:a,value:h(s[e])})}for(let e=s.length;e<u.length;e++){const n=t.concat([e]);r.push({op:c,path:n,value:h(u[e])})}for(let e=u.length-1;s.length<=e;--e){const n=t.concat([e]);o.push({op:i,path:n})}}(e,t,r,o);case 3:return function(e,t,n,r){let{base_:o,copy_:s}=e,a=0;o.forEach((e=>{if(!s.has(e)){const o=t.concat([a]);n.push({op:i,path:o,value:e}),r.unshift({op:c,path:o,value:e})}a++})),a=0,s.forEach((e=>{if(!o.has(e)){const o=t.concat([a]);n.push({op:c,path:o,value:e}),r.unshift({op:i,path:o,value:e})}a++}))}(e,t,r,o)}},generateReplacementPatches_:function(t,r,o,s){o.push({op:n,path:[],value:r===e?void 0:r}),s.push({op:n,path:[],value:t})}})}function G(){class e extends Map{constructor(e,t){super(),this[n]={type_:2,parent_:t,scope_:t?t.scope_:j(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:e,draft_:this,isManual_:!1,revoked_:!1}}get size(){return b(this[n]).size}has(e){return b(this[n]).has(e)}set(e,r){const o=this[n];return c(o),b(o).has(e)&&b(o).get(e)===r||(t(o),U(o),o.assigned_.set(e,!0),o.copy_.set(e,r),o.assigned_.set(e,!0)),this}delete(e){if(!this.has(e))return!1;const r=this[n];return c(r),t(r),U(r),r.base_.has(e)?r.assigned_.set(e,!1):r.assigned_.delete(e),r.copy_.delete(e),!0}clear(){const e=this[n];c(e),b(e).size&&(t(e),U(e),e.assigned_=new Map,f(e.base_,(t=>{e.assigned_.set(t,!1)})),e.copy_.clear())}forEach(e,t){b(this[n]).forEach(((n,r,o)=>{e.call(t,this.get(r),r,this)}))}get(e){const r=this[n];c(r);const o=b(r).get(e);if(r.finalized_||!a(o))return o;if(o!==r.base_.get(e))return o;const s=X(o,r);return t(r),r.copy_.set(e,s),s}keys(){return b(this[n]).keys()}values(){const e=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const t=e.next();if(t.done)return t;return{done:!1,value:this.get(t.value)}}}}entries(){const e=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const t=e.next();if(t.done)return t;const n=this.get(t.value);return{done:!1,value:[t.value,n]}}}}[Symbol.iterator](){return this.entries()}}function t(e){e.copy_||(e.assigned_=new Map,e.copy_=new Map(e.base_))}class o extends Set{constructor(e,t){super(),this[n]={type_:3,parent_:t,scope_:t?t.scope_:j(),modified_:!1,finalized_:!1,copy_:void 0,base_:e,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return b(this[n]).size}has(e){const t=this[n];return c(t),t.copy_?!!t.copy_.has(e)||!(!t.drafts_.has(e)||!t.copy_.has(t.drafts_.get(e))):t.base_.has(e)}add(e){const t=this[n];return c(t),this.has(e)||(s(t),U(t),t.copy_.add(e)),this}delete(e){if(!this.has(e))return!1;const t=this[n];return c(t),s(t),U(t),t.copy_.delete(e)||!!t.drafts_.has(e)&&t.copy_.delete(t.drafts_.get(e))}clear(){const e=this[n];c(e),b(e).size&&(s(e),U(e),e.copy_.clear())}values(){const e=this[n];return c(e),s(e),e.copy_.values()}entries(){const e=this[n];return c(e),s(e),e.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(e,t){const n=this.values();let r=n.next();for(;!r.done;)e.call(t,r.value,r.value,this),r=n.next()}}function s(e){e.copy_||(e.copy_=new Set,e.base_.forEach((t=>{if(a(t)){const n=X(t,e);e.drafts_.set(t,n),e.copy_.add(n)}else e.copy_.add(t)})))}function c(e){e.revoked_&&r(3,JSON.stringify(b(e)))}O("MapSet",{proxyMap_:function(t,n){return new e(t,n)},proxySet_:function(e,t){return new o(e,t)}})}var H=new J,Q=H.produce,T=H.produceWithPatches.bind(H),V=H.setAutoFreeze.bind(H),Y=H.setUseStrictShallowCopy.bind(H),Z=H.applyPatches.bind(H),ee=H.createDraft.bind(H),te=H.finishDraft.bind(H);function ne(e){return e}function re(e){return e}export{J as Immer,Z as applyPatches,ne as castDraft,re as castImmutable,ee as createDraft,$ as current,G as enableMapSet,B as enablePatches,te as finishDraft,g as freeze,t as immerable,s as isDraft,a as isDraftable,e as nothing,u as original,Q as produce,T as produceWithPatches,V as setAutoFreeze,Y as setUseStrictShallowCopy};export default null;
